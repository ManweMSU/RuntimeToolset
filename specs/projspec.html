<html>
	<head>
		<meta charset="UTF-8">
		<title>Спецификация файлов проектов</title>
	</head>
	<body style="font-family: 'Courier New', Courier, monospace">
		<h1>Спецификация файлов проектов</h1>
		<h2>Версия 2.</h2>
		<i>
			Copyright &COPY; Engine Software, Емельянов Д. П. 2021.<br><br>
		</i>
		Файл проекта содержит необходимую информацию для сборки проектов.<br>
		Описание проекта хранится в виде текстового реестра.
		<h2>Цели построения</h2>
		Режим сборки, используемый сборочным конвейером определяется 4 целями построения: архитектурой ЦП, операционной системой, подсистемой и конфигурацией.
		Рекомендуются к реализации следующие цели сборки (однако, доступный на конкретной платформе набор целей может отличаться в любую сторону).
		<table border="1">
			<tr>
				<td><b>Идентификатор</b></td><td><b>Категория</b></td><td><b>Описание</b></td>
			</tr>
			<tr><td>x86</td><td>Архитектура ЦП</td><td>Процессоры семейства Intel x86.</td></tr>
			<tr><td>x64</td><td>Архитектура ЦП</td><td>Процессоры семейств Intel x86-64 и AMD64.</td></tr>
			<tr><td>arm</td><td>Архитектура ЦП</td><td>Процессоры 32-разрядного семейства ARM.</td></tr>
			<tr><td>arm64</td><td>Архитектура ЦП</td><td>Процессоры 64-разрядного семейства ARM.</td></tr>
			<tr><td>windows</td><td>ОС</td><td>Microsoft Windows.</td></tr>
			<tr><td>macosx</td><td>ОС</td><td>Apple macOS.</td></tr>
			<tr><td>console</td><td>Подсистема</td><td>Приложение требует консоль как основной способ взаимодействия с пользователем.</td></tr>
			<tr><td>gui</td><td>Подсистема</td><td>Приложение требует оконную подсистему взаимодействия с пользователем.</td></tr>
			<tr><td>library</td><td>Подсистема</td><td>Предписывает сборку динамической библиотеки.</td></tr>
			<tr><td>silent</td><td>Подсистема</td><td>Приложение не требует средств взаимодействия с пользователем.</td></tr>
			<tr><td>release</td><td>Конфигурация</td><td>Применить оптимизацию скорости выполнения для конечной редакции приложения.</td></tr>
			<tr><td>debug</td><td>Конфигурация</td><td>Не оптимизировать приложение, сохранять отладочную информацию.</td></tr>
		</table>
		При сборке из реестра проекта выбираются корневой каталог, а также специальные каталоги вида "-Target1-...-Target2" при условии что каждая из указанных целей
		установлена как текущая в данном сеансе сборки. Каталоги сливаются. Данный метод позволяет задавать специальные значения полям для отдельных наборов целей.
		<h2>Сущности уровня корня</h2>
		Корень и специальные каталоги могут содержать следующие поля.
		<table>
			<tr>
				<td><b>CompileAll</b></td>
				<td>Логическое. Если истинно, то компилируются все файлы .c, .cpp, .cxx в каталоге CompileAt.</td>
			</tr>
			<tr>
				<td><b>CompileList</b></td>
				<td>Каталог. Если CompileAll = false, то вложенные значения-строки содержат имена файлов, подлежащих компиляции.</td>
			</tr>
			<tr>
				<td><b>OutputLocation</b></td>
				<td>Строка. Содержит имя каталога (относительно папки файла проекта) для вывода собранного проекта.</td>
			</tr>
			<tr>
				<td><b>OutputName</b></td>
				<td>Строка. Содержит имя исполняемого файла в каталоге вывода (без расширения).</td>
			</tr>
			<tr>
				<td><b>Subsystem</b></td>
				<td>Строка. Целевая подсистема. Данное поле имеет смысл только в корневом каталоге.</td>
			</tr>
			<tr>
				<td><b>ForcedArch</b></td>
				<td>Строка. Если не пустая, то предписывает сборочному конвейеру сменить целевую архитектуру ЦП на указанную.</td>
			</tr>
			<tr>
				<td><b>NoHiDPI</b></td>
				<td>Логическое. Если истинно, то графическая программа помечается как не поддерживающая экраны высокой чёткости.</td>
			</tr>
			<tr>
				<td><b>NeedsElevation</b></td>
				<td>Логическое. Если истинно, то приложение Windows требует полномочий администратора в обязательном порядке.</td>
			</tr>
			<tr>
				<td><b>NoDockIcon</b></td>
				<td>Логическое. Если истинно, то приложение Mac OS X не будет иметь значка в Dock во время работы.</td>
			</tr>
			<tr>
				<td><b>UseVersionDefines</b></td>
				<td>Логическое. Если истинно, то информация о версии приложения доступна в компилируемом коде через макросы<sup>1</sup>.</td>
			</tr>
			<tr>
				<td><b>VersionInformation/ApplicationName</b></td>
				<td>Строка. Имя приложения.</td>
			</tr>
			<tr>
				<td><b>VersionInformation/CompanyName</b></td>
				<td>Строка. Имя фирмы - производителя.</td>
			</tr>
			<tr>
				<td><b>VersionInformation/Copyright</b></td>
				<td>Строка. Заявление об авторских правах.</td>
			</tr>
			<tr>
				<td><b>VersionInformation/Version</b></td>
				<td>Строка. Версия приложения. 4 целых числа через точку.</td>
			</tr>
			<tr>
				<td><b>VersionInformation/InternalName</b></td>
				<td>Строка. Внутреннее имя исполняемого файла.</td>
			</tr>
			<tr>
				<td><b>VersionInformation/ApplicationIdentifier</b></td>
				<td>Строка. Идентификатор приложения.</td>
			</tr>
			<tr>
				<td><b>VersionInformation/CompanyIdentifier</b></td>
				<td>Строка. Идентификатор фирмы - производителя.</td>
			</tr>
			<tr>
				<td><b>VersionInformation/Description</b></td>
				<td>Строка. Описание приложения.</td>
			</tr>
			<tr>
				<td><b>ApplicationIcon</b></td>
				<td>Строка. Имя файла со значком приложение.</td>
			</tr>
			<tr>
				<td><b>Resources</b></td>
				<td>Каталог. Содержит перечисления встраиваемых ресурсов<sup>2</sup>.</td>
			</tr>
			<tr>
				<td><b>Attachments</b></td>
				<td>Каталог. Содержит перечисления сопровождающих ресурсов<sup>3</sup>.</td>
			</tr>
			<tr>
				<td><b>Invoke</b></td>
				<td>Каталог перечислений вызовов внешних инструментов<sup>5</sup>.</td>
			</tr>
			<tr>
				<td><b>FileFormats</b></td>
				<td>Каталог перечислений поддерживаемых форматов файлов и протоколов<sup>6</sup>.</td>
			</tr>
			<tr>
				<td><b>Include</b></td>
				<td>Содержит строки - пути к каталогам поиска заголовков.</td>
			</tr>
		</table>
		<p><sup>1</sup> - система сборки определяет следующие макросы:
			<ul>
				<li><b>ENGINE_WINDOWS</b> при сбоке под Windows,</li>
				<li><b>ENGINE_UNIX</b> при сбоке под Unix-подобную систему,</li>
				<li><b>ENGINE_MACOSX</b> при сбоке под Mac OS X,</li>
				<li><b>ENGINE_X64</b> при построении 64-разрядной программы,</li>
				<li><b>ENGINE_ARM</b> при построении под архитектуру семейства ARM,</li>
				<li><b>ENGINE_DEBUG</b> при сборке с использованием отладочной конфигурации,</li>
				<li><b>ENGINE_SUBSYSTEM_CONSOLE</b> при построении консольной программы,</li>
				<li><b>ENGINE_SUBSYSTEM_GUI</b> при построении графической программы,</li>
				<li><b>ENGINE_SUBSYSTEM_LIBRARY</b> при построении динамической библиотеки.</li>
				<li><b>ENGINE_SUBSYSTEM_SILENT</b> при построении программы без интерфейса пользователя.</li>
			</ul>
			Если UseVersionDefines истинно, то дополнительно определяются следующие макросы:
			<ul>
				<li><b>ENGINE_VI_APPNAME</b> - строка с именем программы из информации о версии,</li>
				<li><b>ENGINE_VI_COMPANY</b> - строка с фирмы-производителя программы из информации о версии,</li>
				<li><b>ENGINE_VI_COPYRIGHT</b> - строка с заявлением об авторских правах из информации о версии,</li>
				<li><b>ENGINE_VI_APPSYSNAME</b> - строка с внутреннем именем программы из информации о версии,</li>
				<li><b>ENGINE_VI_APPSHORTVERSION</b> - строка с первыми двумя числами из версии программы,</li>
				<li><b>ENGINE_VI_APPVERSION</b> - строка со всеми четырьмя числами из версии программы,</li>
				<li><b>ENGINE_VI_VERSIONMAJOR</b> - старшее число в версии программы,</li>
				<li><b>ENGINE_VI_VERSIONMINOR</b> - второе число в версии программы,</li>
				<li><b>ENGINE_VI_SUBVERSION</b> - третье число в версии программы,</li>
				<li><b>ENGINE_VI_BUILD</b> - младшее число в версии программы,</li>
				<li><b>ENGINE_VI_APPIDENT</b> - строка с идентификатором программы из информации о версии,</li>
				<li><b>ENGINE_VI_COMPANYIDENT</b> - строка с идентификатором фирмы-производителя программы из информации о версии,</li>
				<li><b>ENGINE_VI_DESCRIPTION</b> - строка с описанием программы из информации о версии.</li>
			</ul>
		</p>
		<p><sup>2</sup> - каталог встраиваемых ресурсов содержит:<br>
		- поля, имена которых интерпретируются как идентификаторы ресурсов, а значения как пути к файлу ресурсов. Путь указывается относительно папки с проектом.<br>
		- каталоги, имена которых состоят из двух латинских букв. Содержимое таких каталогов интерпретируется
		рекурсивно так же, как и главного каталога, но описанные в них ресурсы помечаются специфичными для языка, заданного двузначным кодом каталога.
		</p>
		<p><sup>3</sup> - каталог сопровождающих ресурсов содержит набор подкаталогов,
		каждый подкаталог описывает один ресурс посредством следующих полей:
		<ul>
			<li><b>From</b> - путь к исходному файлу.</li>
			<li><b>To</b> - путь размещения сопровождающего ресурса относительно каталога с исполняемым файлом<sup>4</sup>.</li>
		</ul>
		</p>
		<p><sup>4</sup> - для графических программ Mac OS X исполняемым файлом считается файл в формате Mach-O внутри пакета, не сам пакет.</p>
		<p><sup>5</sup> - каталог вызовов внешних инструментов содержит набор строковых значений, каждое из которых задаёт команду вызова внешнего инструмента.</p>
		<p><sup>6</sup> - каталог форматов содержит дочерние каталоги. Каждый каталог соответствует одному формату или протоколу.<br>
			Для файлового формата допускаются поля: <b>Extension</b> (расширение файла, текстовое), <b>Description</b> (краткое описание, текстовое), <b>Icon</b> (путь к значку),
			<b>CanCreate</b> (логическое, указывает, может ли программа создавать такие файлы).<br>
			Для протокола допускаются поля: <b>Protocol</b> (имя протокола в URL, текстовое), <b>Description</b> (краткое описание, текстовое).
		</p>
	</body>
</html>